(function(n){"use strict";function i(t,i){this.itemsArray=[];this.$element=n(t);this.$element.hide();this.isSelect=t.tagName==="SELECT";this.multiple=this.isSelect&&t.hasAttribute("multiple");this.objectItems=i&&i.itemValue;this.placeholderText=t.hasAttribute("placeholder")?this.$element.attr("placeholder"):"";this.inputSize=Math.max(1,this.placeholderText.length);this.$container=n('<div class="bootstrap-tagsinput"><\/div>');this.$input=n('<input size="'+this.inputSize+'" type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container);this.$element.after(this.$container);this.build(i)}function r(n,t){if(typeof n[t]!="function"){var i=n[t];n[t]=function(n){return n[i]}}}function o(n,t){if(typeof n[t]!="function"){var i=n[t];n[t]=function(){return i}}}function t(n){return n?f.text(n).html():""}function e(n){var t=0,i;return document.selection?(n.focus(),i=document.selection.createRange(),i.moveStart("character",-n.value.length),t=i.text.length):(n.selectionStart||n.selectionStart=="0")&&(t=n.selectionStart),t}var u={tagClass:function(){return"label label-info"},itemValue:function(n){return n?n.toString():n},itemText:function(n){return this.itemValue(n)},freeInput:!0,maxTags:undefined,confirmKeys:[13,9],onTagExists:function(n,t){t.hide().fadeIn()}},f;i.prototype={constructor:i,add:function(i,r){var u=this,f,e,a,o,s;if((!u.options.maxTags||!(u.itemsArray.length>=u.options.maxTags))&&(i===!1||i)){if(typeof i=="object"&&!u.objectItems)throw"Can't add objects when itemValue option is not set";if(!i.toString().match(/^\s*$/)){if(u.isSelect&&!u.multiple&&u.itemsArray.length>0&&u.remove(u.itemsArray[0]),typeof i=="string"&&this.$element[0].tagName==="INPUT"&&(f=i.split(","),f.length>1)){for(e=0;e<f.length;e++)this.add(f[e],!0);r||u.pushVal();return}var h=u.options.itemValue(i),c=u.options.itemText(i),v=u.options.tagClass(i),l=n.grep(u.itemsArray,function(n){return u.options.itemValue(n)===h})[0];if(l){if(u.options.onTagExists){a=n(".tag",u.$container).filter(function(){return n(this).data("item")===l});u.options.onTagExists(i,a)}return}u.itemsArray.push(i);o=n('<span class="tag '+t(v)+'">'+t(c)+'<span data-role="remove"><\/span><\/span>');o.data("item",i);u.findInputWrapper().before(o);o.after(" ");u.isSelect&&!n('option[value="'+escape(h)+'"]',u.$element)[0]&&(s=n("<option selected>"+t(c)+"<\/option>"),s.data("item",i),s.attr("value",h),u.$element.append(s));r||u.pushVal();u.options.maxTags===u.itemsArray.length&&u.$container.addClass("bootstrap-tagsinput-max");u.$element.trigger(n.Event("itemAdded",{item:i}))}}},remove:function(t,i){var r=this;r.objectItems&&(t=typeof t=="object"?n.grep(r.itemsArray,function(n){return r.options.itemValue(n)==r.options.itemValue(t)})[0]:n.grep(r.itemsArray,function(n){return r.options.itemValue(n)==t})[0]);t&&(n(".tag",r.$container).filter(function(){return n(this).data("item")===t}).remove(),n("option",r.$element).filter(function(){return n(this).data("item")===t}).remove(),r.itemsArray.splice(n.inArray(t,r.itemsArray),1));i||r.pushVal();r.options.maxTags>r.itemsArray.length&&r.$container.removeClass("bootstrap-tagsinput-max");r.$element.trigger(n.Event("itemRemoved",{item:t}))},removeAll:function(){var t=this;for(n(".tag",t.$container).remove(),n("option",t.$element).remove();t.itemsArray.length>0;)t.itemsArray.pop();t.pushVal();t.options.maxTags&&!this.isEnabled()&&this.enable()},refresh:function(){var i=this;n(".tag",i.$container).each(function(){var r=n(this),u=r.data("item"),e=i.options.itemValue(u),o=i.options.itemText(u),s=i.options.tagClass(u),f;r.attr("class",null);r.addClass("tag "+t(s));r.contents().filter(function(){return this.nodeType==3})[0].nodeValue=t(o);i.isSelect&&(f=n("option",i.$element).filter(function(){return n(this).data("item")===u}),f.attr("value",e))})},items:function(){return this.itemsArray},tay:function(){return this.itemsArray.length},pushVal:function(){var t=this,i=n.map(t.items(),function(n){return t.options.itemValue(n).toString()});t.$element.val(i,!0).trigger("change")},build:function(t){var i=this,f;i.options=n.extend({},u,t);f=i.options.typeahead||{};i.objectItems&&(i.options.freeInput=!1);r(i.options,"itemValue");r(i.options,"itemText");r(i.options,"tagClass");i.options.source&&(f.source=i.options.source);f.source&&n.fn.typeahead&&(o(f,"source"),i.$input.typeahead({source:function(t,r){function e(n){for(var u,f=[],t=0;t<n.length;t++)u=i.options.itemText(n[t]),o[u]=n[t],f.push(u);r(f)}this.map={};var o=this.map,u=f.source(t);n.isFunction(u.success)?u.success(e):n.when(u).then(e)},updater:function(n){i.add(this.map[n])},matcher:function(n){return n.toLowerCase().indexOf(this.query.trim().toLowerCase())!==-1},sorter:function(n){return n.sort()},highlighter:function(n){var t=new RegExp("("+this.query+")","gi");return n.replace(t,"<strong>$1<\/strong>")}}));i.$input.blur(function(){i.$input.parent().removeClass("selected");i.$input.val().trim().length>0&&(i.add(i.$input.val()),i.$input.val(""));i.itemsArray.length>0?i.$input.parent().addClass("valid"):(i.$input.parent().addClass("invalid"),i.$input.css("min-width","100%"),i.$input.parent().parent().find("input:first").attr("id")=="stages"?i.$input.val("You need a minimum of 1 stage to get started."):i.$input.val("You need a minimum of 1 pipeline to get started."))});i.$container.on("click",n.proxy(function(){i.$input.css("min-width","");i.$input.val("");i.$input.parent().removeClass("valid");i.$input.parent().removeClass("invalid");i.$input.parent().addClass("selected");i.$input.focus()},i));i.$container.on("keydown","input",n.proxy(function(t){var r=n(t.target),u=i.findInputWrapper(),f,o,s,h;switch(t.which){case 8:e(r[0])===0&&(f=u.prev(),f&&i.remove(f.data("item")));break;case 46:e(r[0])===0&&(o=u.next(),o&&i.remove(o.data("item")));break;case 37:s=u.prev();r.val().length===0&&s[0]&&(s.before(u),r.focus());break;case 39:h=u.next();r.val().length===0&&h[0]&&(h.after(u),r.focus());break;default:i.options.freeInput&&n.inArray(t.which,i.options.confirmKeys)>=0&&(i.add(r.val()),r.val(""),t.preventDefault())}r.attr("size",Math.max(this.inputSize,r.val().length))},i));i.$container.on("click","[data-role=remove]",n.proxy(function(t){i.remove(n(t.target).closest(".tag").data("item"))},i));i.options.itemValue===u.itemValue&&(i.$element[0].tagName==="INPUT"?i.add(i.$element.val()):n("option",i.$element).each(function(){i.add(n(this).attr("value"),!0)}))},destroy:function(){var n=this;n.$container.off("keypress","input");n.$container.off("click","[role=remove]");n.$container.remove();n.$element.removeData("tagsinput");n.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var t=this.$input[0],i=this.$container[0];t&&t.parentNode!==i;)t=t.parentNode;return n(t)}};n.fn.tagsinput=function(t,r){var u=[];return this.each(function(){var f=n(this).data("tagsinput"),e;f?(e=f[t](r),e!==undefined&&u.push(e)):(f=new i(this,t),n(this).data("tagsinput",f),u.push(f),this.tagName==="SELECT"&&n("option",n(this)).attr("selected","selected"),n(this).val(n(this).val()))}),typeof t=="string"?u.length>1?u:u[0]:u};n.fn.tagsinput.Constructor=i;f=n("<div />");n(function(){n("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})})(window.jQuery);
//# sourceMappingURL=bootstrap-tagsinput.min.js.map